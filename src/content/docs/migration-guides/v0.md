---
title: v0.x
description: Migration guide for v0.x. Mainly records breaking changes.
---

## v0.20.0

### Coding changes for rest query

GET methods are highly likely to be affected.

```diff lang="ts"
await c.rest(
  'GET', _channels_$_messages,
-  [channel_id], { limit: 10 },
+  [channel_id, { limit: 10 }],
)
```

```diff lang="ts" "QUERY_OBJ"
-await c.rest('METHOD', 'PATH', ['PATH_VAR'], DATA_OBJ or QUERY_OBJ)
+await c.rest('METHOD', 'PATH', ['PATH_VAR', QUERY_OBJ], DATA_OBJ)
```

## v0.19.0

Context integration

### c.cronEvent -> c.interaction

```diff lang="ts"
const app = new DiscordHono().cron("", async c => {
-  console.log(c.cronEvent)
+  console.log(c.interaction)
})
```

### CronContext changed to type information only

## v0.18.0

### Removed c.followupDelete

v0.17.0 -> v0.18.0

```diff lang="ts"
-return c.update().resDefer(c.followupDelete)
+return c.update().resDefer(c => c.followup())
```

Before v0.16.x -> v0.18.0

```diff lang="ts"
-return c.resDeferUpdate(c.followupDelete)
+return c.update().resDefer(c => c.followup())
```

## v0.17.0

### Removed c.req, c.waitUntil()

Since c.req could be confused with Hono's c.req, and because handling Request objects is not necessary for Discord Bots, it has been removed.  
If you absolutely need this functionality, please consider using Hono middleware instead.  
If you cannot find an alternative and require c.req, please create an issue.

c.waitUntil() has been removed as its functionality is included in c.resDefer(), and its usage frequency was low.  
Instead, please use c.executionCtx.waitUntil().

```diff lang="ts"
-c.waitUntil(/*process*/)
+c.executionCtx.waitUntil(/*process*/)
```

### c.resUpdate(), c.resDeferUpdate() -> c.update()

```diff lang="ts"
-return c.resUpdate("update text")
+return c.update().res("update text")
```
```diff lang="ts"
-return c.resDeferUpdate("update text")
+return c.update().resDefer("update text")
```

### c.suppressEmbeds(), c.ephemeral(), c.suppressNotifications() -> c.flags()

```diff lang="ts"
-return c.ephemeral().suppressNotifications().res("ephemeral text")
+return c.flags("EPHEMERAL", "SUPPRESS_NOTIFICATIONS").res("ephemeral text")
```

## v0.16.6

Unintentional breaking change caused by a developer implementation mistake

### fix: c.followup

In versions prior to v0.16.5, followups were handled via [POST](https://discord.com/developers/docs/interactions/receiving-and-responding#create-followup-message).  
From v0.16.6 onwards, followups are handled via [PATCH](https://discord.com/developers/docs/interactions/receiving-and-responding#edit-original-interaction-response).  
This is a breaking change only if you are intentionally calling followup multiple times.  
In such cases, please use `c.rest` to create a new followup.

## v0.16.0

### Rest -> createRest

```diff lang="ts"
-const rest = new Rest('token')
+const rest = createRest('token')
```

```diff lang="ts"
-const res = c.rest.post(_channels_$_messages, [channel_id], { content: 'this is rest' })
+const res = c.rest('POST', _channels_$_messages, [channel_id], { content: 'this is rest' })
```

## v0.15.0

### factory.loader -> app.loader

```diff lang="ts"
const app = factory.discord()
-  factory.loader(app, Object.values(handlers))
+  .loader(Object.values(handlers))
export default app
```

## v0.14.0

### Return value of get method in Rest
```diff lang="ts"
-const { result } = await c.rest.get('/applications/@me', [])
+const result = await c.rest.get('/applications/@me', []).then(r => r.json())
```

## v0.13.0

### Unsupport regex keys

For .component() and .modal(), please use custom_id instead of regex keys.  
If you absolutely need to use regex keys, please refer to [this example](/ja/examples/regex-routing/).

```diff lang="ts"
const app = new DiscordHono()
-  .command(/regex/, c => c.res('regex'))
+  .command('regex', c => c.res('regex'))
```

### Type change for ComponentContext

```diff lang="ts"
-const handler= (c: ComponentContext<Env, 'Button'>) => {
+const handler= (c: ComponentContext<Env, Button>) => {
  //...
}
```

## v0.12.0

### Context integration
```diff lang="ts"
const func = (c: CommandContext<Env> | ComponentContext<Env>) => {
  //...
-  if (c instanceof CommandContext)
+  if (c.interaction.type === 2)
  //...
}
```
